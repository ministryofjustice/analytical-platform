---
owner_slack: "#analytical-platform-notifications"
title: Ingestion Maintenance
last_reviewed_on: 2024-09-05
review_in: 1 months
---

# <%= current_page.data.title %>

The Lambdas used within the solution are built in two repositories:

-   [analytical-platform-ingestion-transfer](https://github.com/ministryofjustice/analytical-platform-ingestion-transfer)  -  `transfer`
-   [analytical-platform-ingestion-scan](https://github.com/ministryofjustice/analytical-platform-ingestion-scan)  -  `definition-upload` +  `scan`

Dependabot will create Pull Requests to update packages within the repositories. Once these are merged a new release must be created (per image) then the solution must be updated to use this image. Instructions on how to do this are below.

## Repository Updates

The instructions use the [analytical-platform-ingestion-transfer](https://github.com/ministryofjustice/analytical-platform-ingestion-transfer/) repository as an example.

1. Merge any outstanding Dependabots (do your due diligence to ensure these work as expected).
2. Click on [Releases](https://github.com/ministryofjustice/analytical-platform-ingestion-transfer/releases) section.
3. Click on ['Draft a new release'](https://github.com/ministryofjustice/analytical-platform-ingestion-transfer/releases/new).
4. Click on 'Choose a tag'.
  - Create a new tag using [semantic versioning](https://semver.org/).
5. Click 'Generate release notes'.
6. Click 'Publish Release'.

The GitHub [instructions](https://docs.github.com/en/repositories/releasing-projects-on-github/managing-releases-in-a-repository#creating-a-release]) are located here for reference.

## Updating Lambda

1. Create a PR to update the lambdas which are defined in the modernisation platform environments repository. Specifically:
	- [definition-upload](https://github.com/ministryofjustice/modernisation-platform-environments/blob/e3e41a3a9880b22798b418448a26efe3bacade1c/terraform/environments/analytical-platform-ingestion/lambda-functions.tf#L14)
	- [scan](https://github.com/ministryofjustice/modernisation-platform-environments/blob/e3e41a3a9880b22798b418448a26efe3bacade1c/terraform/environments/analytical-platform-ingestion/lambda-functions.tf#L68)
	- [transfer](https://github.com/ministryofjustice/modernisation-platform-environments/blob/e3e41a3a9880b22798b418448a26efe3bacade1c/terraform/environments/analytical-platform-ingestion/lambda-functions.tf#L138)
1. Ask a member of the Analytical Platform team to approve the Pull Request.

Confirm the changes have taken effect by examining the Lambda functions in the `analytical-platform-ingestion` AWS Account.
