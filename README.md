# Data Platform

[![repo standards badge](https://img.shields.io/endpoint?labelColor=231f20&color=005ea5&style=for-the-badge&label=MoJ%20Compliant&url=https%3A%2F%2Foperations-engineering-reports.cloud-platform.service.justice.gov.uk%2Fapi%2Fv1%2Fcompliant_public_repositories%2Fendpoint%2Fdata-platform&logo=data:image/png;base64,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)](https://operations-engineering-reports.cloud-platform.service.justice.gov.uk/public-github-repositories.html#data-platform)
[![OpenSSF Scorecard](https://api.securityscorecards.dev/projects/github.com/ministryofjustice/data-platform/badge)](https://api.securityscorecards.dev/projects/github.com/ministryofjustice/data-platform)

The Data Platform will be a centralised, in-house platform to provide hosting
and tools for data:

- storage
- discovery
- analysis
- dissemination
- governance

## About this repository

This is the Ministry of Justice repository for the core infrastructure of the
Data Platform.

Please read the [contributing guide](CONTRIBUTING.md) before sending pull
requests, or creating issues.

## Data Platform repositories

We have a series of repositories for our work. We have adopted the naming
convention of naming each repository starting with `data-platform-*`.

We also [name things](https://technical-guidance.service.justice.gov.uk/documentation/standards/naming-things.html#naming-things)
so that users can understand what a repository does through its name.

| Name | Description |
| -------------- | -------------- |
| [Data Platform (this repository)](https://github.com/ministryofjustice/data-platform)          | Core infrastructure, public facing documentation, feature work, enhancements, and issues  |
| [Data Platform products](https://github.com/ministryofjustice/data-platform-products)          | User-created services that are hosted on the Data Platform                                |
| [Data Platform support](https://github.com/ministryofjustice/data-platform-support)            | This repository is used for support and provides templated forms for our users.           |
| [Modernisation Platform environments repository](https://github.com/ministryofjustice/modernisation-platform-environments/tree/main/terraform/environments/data-platform) | Hosting environment for the data platform |

### Testing locally

Unit tests are implemented per container using pytest. We use
[moto](https://pypi.org/project/moto/) to mock out AWS services.

For example, to test `daap-get-glue-metadata`, run:

```shell
cd containers/daap-get-glue-metadata
pip install -r tests/requirements.txt
pytest
```

To test the full docker image without deploying it to lambda,
follow the instructions in
[Testing AWS base images](https://docs.aws.amazon.com/lambda/latest/dg/images-test.html#images-test-AWSbase).

### OpenSSF Best Practices

These are the requirements currently met by this repository in line with the
FLOSS Best Practices Criteria (Passing Badge)

Basic project site content:

- The project site describes what the software does
- Provides information on how to interact with the project
- explains contribution process

FLOSS license:

- Uses MIT licence

Documentation:

- The project provides basic documentation

Public version-controlled source repository

- GIT version control

Bug-reporting process:

- The project provides a process for users to submit bug reports
- The project uses GitHub issues/ zen hub to track issues

Other security issues:

- secured private credentials via Kuberentes secrets and GitHub secrets

Secured delivery against man-in-the-middle (MITM) attacks:

- Delivered via terraform secured by HTPPS and spcific IAM roles useable only
  by the GitHub action
- No Cryptographic hases transported over HTTP

Static code analysis:

- Use of CodeQL

Other:

- The project site supports HTTPS using TLS
- The project is maintained

  For more information please see [Criteria](https://bestpractices.coreinfrastructure.org/en/criteria/0#0.repo_track)

### Useful links

It may be also useful to look at:

- [Technical documentation](https://technical-documentation.data-platform.service.justice.gov.uk/)
- [Architecture Decision Records (ADRs)](https://technical-documentation.data-platform.service.justice.gov.uk/documentation/adrs/adr-index.html)

## Getting in touch

We are currently in the research and design phase, and are not yet accepting
requests to host new data products.

In the meantime please get in touch via our `#data-platform` Slack channel with
any questions.

<!--
## Service runbook information

Please note we do not provide support for data quality issues, or for apps
dependent on the data platform Please contact the relevant
data or app owners via [*the directory of Data Platform services*]

### Incident response hours

Office hours, usually 8am-5pm on working days

-->

### Incident contact details

Slack: `#data-platform`
Email: `data-platform@digital.justice.gov.uk`

### Service team contact

As above - preferably our Slack channel: `#data-platform` (or email `data-platform@digital.justice.gov.uk`)

### Hosting environment

[Modernisation Platform](https://user-guide.modernisation-platform.service.justice.gov.uk/)

<!-- ### Consumers of this service:

(placeholder)

### **Services consumed by this:**

(placeholder) -->

## Editing and publishing the Technical Documentation

The [published](https://technical-documentation.data-platform.service.justice.gov.uk/)
documentation is created by editing `*.html.md.erb` files,
found in the [docs source](docs/source/) folder.

The syntax is Markdown, more details can be found [here](https://daringfireball.net/projects/markdown/).

For guidance see the Tech Docs Template [Write your content](https://tdt-documentation.london.cloudapps.digital/write_docs/content/).

While editing the files locally, you can start a Docker container that will use
Middleman to act as a server hosting the web pages. See [preview docs](#preview-docs).

Every change should be reviewed in a pull request, no matter how minor.
PR request reviewer/s should be enabled within the main branch protection
settings.

Merging the changes to the `main` branch automatically publishes the
changes via GH Action. See [publishing](#publishing).

## Preview docs

You can preview how your changes will look, if you've cloned this repository
to your local machine, run this command:

```bash
bash scripts/docs/docker.sh preview
```

This will run a preview web server on <http://localhost:4567> which you can
open in your browser.

Use `bash scripts/docs/docker.sh check` to compile
the site to HTML and check the URLs are valid.

This is only accessible on your computer, and won't be accessible to anyone
else.

For more details see the
[tech-docs-github-pages-publisher](https://github.com/ministryofjustice/tech-docs-github-pages-publisher)
repository.

## Publishing

Any changes you push/merge into the
`main` branch should be published to GitHub Pages site automatically.

## Template configuration

The web page layout is configured using the config/tech-docs.yml file.

The template can be configured in [config/tech-docs.yml](config/tech-docs.yml)

Further configuration options are described on the Tech Docs Template
website: [Global Configuration](https://tdt-documentation.london.cloudapps.digital/configure_project/global_configuration/).

### Last review date

10th August 2023
