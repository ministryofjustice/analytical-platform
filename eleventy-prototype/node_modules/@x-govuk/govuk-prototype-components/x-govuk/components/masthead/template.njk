{% from "govuk/components/breadcrumbs/macro.njk" import govukBreadcrumbs %}
{% from "govuk/components/button/macro.njk" import govukButton %}
{% from "govuk/components/phase-banner/macro.njk" import govukPhaseBanner %}

<div class="x-govuk-masthead{%- if params.classes %} {{ params.classes }}{% endif -%}"
  {%- for attribute, value in params.attributes %} {{ attribute }}="{{ value }}"{% endfor %}>
  <div class="govuk-width-container">
    {{ govukPhaseBanner({
      classes: "x-govuk-phase-banner--inverse" + (" " + params.phaseBanner.classes if params.phaseBanner.classes),
      html: params.phaseBanner.html,
      text: params.phaseBanner.text,
      tag: {
        classes: "x-govuk-tag--inverse" + (" " + params.phaseBanner.tag.classes if params.phaseBanner.tag.classes),
        text: params.phaseBanner.tag.text or "Alpha"
      },
      attributes: params.phaseBanner.attributes
    }) if params.phaseBanner }}
    {{ govukBreadcrumbs({
      classes: "x-govuk-breadcrumbs--inverse" + (" " + params.breadcrumbs.classes if params.breadcrumbs.classes),
      items: params.breadcrumbs.items,
      collapseOnMobile: params.breadcrumbs.collapseOnMobile,
      attributes: params.breadcrumbs.attributes
    }) if params.breadcrumbs }}
    {{- caller() if caller -}}
    <div class="govuk-grid-row">
      <div class="govuk-grid-column-two-thirds-from-desktop">
      {% if params.title %}
        <h1 class="x-govuk-masthead__title{%- if params.title.classes %} {{ params.title.classes }}{% endif %}">
          {{ params.title.html | safe if params.title.html else params.title.text }}
        </h1>
      {% endif %}
      {% if params.description %}
        <div class="x-govuk-masthead__description{%- if params.description.classes %} {{ params.description.classes }}{% endif %}">
          {{ params.description.html | safe if params.description.html else params.description.text }}
        </div>
      {% endif %}
      {% if params.startButton %}
        {{ govukButton({
          classes: "x-govuk-button--inverse" + (" " + params.startButton.classes if params.startButton.classes),
          text: params.startButton.text | default("Get started"),
          href: params.startButton.href,
          isStartButton: true,
          name: params.startButton.name,
          type: params.startButton.type,
          attributes: params.startButton.attributes
        }) }}
      {% endif %}
      </div>
      {% if params.image %}
      <div class="govuk-grid-column-one-third-from-desktop">
        <div class="x-govuk-masthead__image">
          <img src="{{ params.image.src }}" alt="{{ params.image.alt }}"{% if not params.image.alt %} role="presentation"{% endif %}>
        </div>
      </div>
      {% endif %}
    </div>
  </div>
</div>
